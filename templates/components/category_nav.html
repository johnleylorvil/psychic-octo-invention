{% load static %}

<div class="category-navigation">
    <nav class="categories-menu" role="navigation" aria-label="Navigation par catégorie">
        <ul class="nav-list">
            <li class="nav-item">
                <a href="{% url 'marketplace:home' %}" class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}">
                    <i class="fas fa-home" aria-hidden="true"></i>
                    <span>Accueil</span>
                </a>
            </li>
            
            <!-- Main Categories -->
            {% for category in main_categories %}
            <li class="nav-item dropdown">
                <a 
                    href="{% url 'marketplace:category' slug=category.slug %}" 
                    class="nav-link dropdown-toggle"
                    data-bs-toggle="dropdown" 
                    aria-expanded="false"
                    role="button"
                >
                    {% if category.icon %}
                        <i class="{{ category.icon }}" aria-hidden="true"></i>
                    {% else %}
                        <i class="fas fa-tag" aria-hidden="true"></i>
                    {% endif %}
                    <span>{{ category.name }}</span>
                    {% if category.children.exists %}
                        <i class="fas fa-chevron-down dropdown-icon" aria-hidden="true"></i>
                    {% endif %}
                </a>
                
                <!-- Subcategories Dropdown -->
                {% if category.children.exists %}
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item view-all" href="{% url 'marketplace:category' slug=category.slug %}">
                            <strong>Voir tout {{ category.name }}</strong>
                        </a>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    {% for subcategory in category.children.all %}
                    <li>
                        <a class="dropdown-item" href="{% url 'marketplace:category' slug=subcategory.slug %}">
                            {{ subcategory.name }}
                            <small class="text-muted">({{ subcategory.product_count }})</small>
                        </a>
                    </li>
                    {% endfor %}
                </ul>
                {% endif %}
            </li>
            {% endfor %}
            
            <!-- Special Links -->
            <li class="nav-item">
                <a href="{% url 'marketplace:featured' %}" class="nav-link">
                    <i class="fas fa-star" aria-hidden="true"></i>
                    <span>Populaires</span>
                </a>
            </li>
            
            <li class="nav-item">
                <a href="{% url 'marketplace:new_arrivals' %}" class="nav-link">
                    <i class="fas fa-plus-circle" aria-hidden="true"></i>
                    <span>Nouveautés</span>
                </a>
            </li>
            
            <li class="nav-item">
                <a href="{% url 'marketplace:deals' %}" class="nav-link deals-link">
                    <i class="fas fa-fire" aria-hidden="true"></i>
                    <span>Promotions</span>
                    <span class="badge bg-danger ms-1">HOT</span>
                </a>
            </li>
        </ul>
    </nav>
</div>