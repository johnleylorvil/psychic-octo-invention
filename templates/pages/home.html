{% extends 'base/base.html' %}
{% load static %}

{% block title %}Afèpanou - Marketplace Haïtien pour la Croissance Économique{% endblock %}

{% block meta_description %}Découvrez le premier marketplace haïtien. Achetez des produits locaux authentiques et soutenez l'économie haïtienne avec MonCash.{% endblock %}

{% block extra_css %}
<style>
.hero-section {
    background: var(--gradient-hero);
    color: white;
    padding: 80px 0;
    margin-bottom: 60px;
}

.category-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: none;
    border-radius: 12px;
}

.category-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(230, 126, 34, 0.2);
}

.product-section {
    margin-bottom: 60px;
}

.stats-section {
    background-color: #f8f9fa;
    padding: 60px 0;
    margin: 60px 0;
}
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="hero-content">
                    <h1 class="hero-title display-4 fw-bold mb-4">
                        Bienvenue sur Afèpanou
                    </h1>
                    <p class="hero-subtitle lead mb-4">
                        Le marketplace qui connecte les vendeurs haïtiens aux consommateurs, 
                        favorisant la croissance économique locale et l'entrepreneuriat.
                    </p>
                    <div class="hero-actions">
                        <a href="{% url 'marketplace:categories' %}" class="btn btn-light btn-lg me-3">
                            <i class="fas fa-store me-2" aria-hidden="true"></i>
                            Explorer les Produits
                        </a>
                        <a href="{% url 'account:become_seller' %}" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-user-plus me-2" aria-hidden="true"></i>
                            Devenir Vendeur
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="hero-image text-center">
                    <img src="{% static 'images/hero-illustration.png' %}" alt="Marketplace Haïtien" class="img-fluid">
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Categories Section -->
<section class="categories-section">
    <div class="container">
        <div class="section-header text-center mb-5">
            <h2 class="section-title h1 mb-3">Explorez par Catégorie</h2>
            <p class="section-subtitle text-muted">Découvrez une large gamme de produits haïtiens authentiques</p>
        </div>
        
        <div class="row g-4">
            {% for category in categories %}
            <div class="col-lg-3 col-md-4 col-sm-6">
                <div class="card category-card h-100 text-center">
                    <div class="card-body p-4">
                        <div class="category-icon mb-3">
                            {% if category.icon %}
                                <i class="{{ category.icon }} fa-3x text-primary" aria-hidden="true"></i>
                            {% else %}
                                <i class="fas fa-tag fa-3x text-primary" aria-hidden="true"></i>
                            {% endif %}
                        </div>
                        <h5 class="card-title">{{ category.name }}</h5>
                        <p class="card-text text-muted small">{{ category.product_count }} produit{{ category.product_count|pluralize }}</p>
                        <a href="{% url 'marketplace:category' slug=category.slug %}" class="btn btn-outline-primary">
                            Découvrir
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Featured Products Section -->
<section class="product-section">
    <div class="container">
        <div class="section-header d-flex justify-content-between align-items-center mb-5">
            <div>
                <h2 class="section-title h1 mb-2">Produits Populaires</h2>
                <p class="section-subtitle text-muted">Les favoris de nos clients</p>
            </div>
            <a href="{% url 'marketplace:featured' %}" class="btn btn-outline-primary">
                Voir tous <i class="fas fa-arrow-right ms-1" aria-hidden="true"></i>
            </a>
        </div>
        
        <div class="row g-4">
            {% for product in featured_products %}
            <div class="col-lg-3 col-md-4 col-sm-6">
                {% include 'components/product_card.html' %}
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Statistics Section -->
<section class="stats-section">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-item">
                    <div class="stat-number display-4 fw-bold text-primary">{{ total_products|default:"1000+" }}</div>
                    <div class="stat-label h5">Produits</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-item">
                    <div class="stat-number display-4 fw-bold text-primary">{{ total_sellers|default:"150+" }}</div>
                    <div class="stat-label h5">Vendeurs</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-item">
                    <div class="stat-number display-4 fw-bold text-primary">{{ total_orders|default:"5000+" }}</div>
                    <div class="stat-label h5">Commandes</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-item">
                    <div class="stat-number display-4 fw-bold text-primary">{{ satisfied_customers|default:"98%" }}</div>
                    <div class="stat-label h5">Clients Satisfaits</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- New Arrivals Section -->
<section class="product-section">
    <div class="container">
        <div class="section-header d-flex justify-content-between align-items-center mb-5">
            <div>
                <h2 class="section-title h1 mb-2">Nouveautés</h2>
                <p class="section-subtitle text-muted">Découvrez les derniers ajouts</p>
            </div>
            <a href="{% url 'marketplace:new_arrivals' %}" class="btn btn-outline-primary">
                Voir toutes <i class="fas fa-arrow-right ms-1" aria-hidden="true"></i>
            </a>
        </div>
        
        <div class="row g-4">
            {% for product in new_products %}
            <div class="col-lg-3 col-md-4 col-sm-6">
                {% include 'components/product_card.html' %}
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="testimonials-section mb-5">
    <div class="container">
        <div class="section-header text-center mb-5">
            <h2 class="section-title h1 mb-3">Ce que disent nos clients</h2>
            <p class="section-subtitle text-muted">Témoignages authentiques de notre communauté</p>
        </div>
        
        <div class="row g-4">
            {% for review in recent_reviews %}
            <div class="col-lg-4 col-md-6">
                <div class="card testimonial-card h-100">
                    <div class="card-body">
                        <div class="rating mb-3">
                            {% include 'components/rating_stars.html' with rating=review.rating %}
                        </div>
                        <blockquote class="blockquote mb-3">
                            <p>"{{ review.comment|truncatewords:20 }}"</p>
                        </blockquote>
                        <footer class="blockquote-footer">
                            <strong>{{ review.user.get_full_name|default:review.user.username }}</strong>
                            <br>
                            <small class="text-muted">
                                Produit: <a href="{% url 'marketplace:product_detail' slug=review.product.slug %}">{{ review.product.name|truncatewords:5 }}</a>
                            </small>
                        </footer>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Call to Action Section -->
<section class="cta-section bg-primary text-white py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h3 class="h2 mb-3">Prêt à commencer votre business?</h3>
                <p class="lead mb-0">Rejoignez des centaines de vendeurs qui font confiance à Afèpanou pour développer leur activité.</p>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a href="{% url 'account:become_seller' %}" class="btn btn-light btn-lg">
                    <i class="fas fa-rocket me-2" aria-hidden="true"></i>
                    Commencer Maintenant
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Add any homepage-specific JavaScript here
document.addEventListener('DOMContentLoaded', function() {
    // Initialize any interactive elements
    console.log('Homepage loaded successfully');
});
</script>
{% endblock %}